import{A as U,R as m,n as Lt,r as P,j as i,C,q as M,s as F,v as fr,t as B,B as we}from"./index-DF6BEUun.js";import{I as Q}from"./input-CJSYcS0U.js";import{L as ee}from"./label-lW2KdpBp.js";import{A as pr}from"./arrow-left-8Q1IB9i5.js";import{f as E,r as $t,a as hr,b as It,c as mr,i as q,T as rt,p as X,L,g as Ct,d as at,e as Mt,D as Ft,C as De,h as se,j as ie,S as yr,A as Bt,k as vr,l as re,m as Xe,n as W,o as Kt,u as Wt,G as zt,q as Le,s as gr,t as Vt,v as xr,w as Ee,x as gt,y as Te,z as br,B as jr,E as xt,F as nt,H as ye,X as ae,Y as ne,I as Ht,J as Ar,R as le,K as me,M as ce,N as Ge}from"./generateCategoricalChart-BYhaYWQk.js";var kr=["points","className","baseLinePoints","connectNulls"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ve.apply(this,arguments)}function wr(e,t){if(e==null)return{};var a=Or(e,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Or(e,t){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}function bt(e){return Sr(e)||_r(e)||Pr(e)||Nr()}function Nr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(e,t){if(e){if(typeof e=="string")return Ze(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ze(e,t)}}function _r(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sr(e){if(Array.isArray(e))return Ze(e)}function Ze(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var jt=function(t){return t&&t.x===+t.x&&t.y===+t.y},Er=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return t.forEach(function(r){jt(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),jt(t[0])&&a[a.length-1].push(t[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},Oe=function(t,a){var r=Er(t);a&&(r=[r.reduce(function(o,s){return[].concat(bt(o),bt(s))},[])]);var n=r.map(function(o){return o.reduce(function(s,c,u){return"".concat(s).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(n,"Z"):n},Tr=function(t,a,r){var n=Oe(t,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(Oe(a.reverse(),r).slice(1))},Rr=function(t){var a=t.points,r=t.className,n=t.baseLinePoints,o=t.connectNulls,s=wr(t,kr);if(!a||!a.length)return null;var c=U("recharts-polygon",r);if(n&&n.length){var u=s.stroke&&s.stroke!=="none",l=Tr(a,n,o);return m.createElement("g",{className:c},m.createElement("path",ve({},E(s,!0),{fill:l.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:l})),u?m.createElement("path",ve({},E(s,!0),{fill:"none",d:Oe(a,o)})):null,u?m.createElement("path",ve({},E(s,!0),{fill:"none",d:Oe(n,o)})):null)}var f=Oe(a,o);return m.createElement("path",ve({},E(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:c,d:f}))},Ue,At;function Dr(){if(At)return Ue;At=1;var e=$t(),t=hr(),a=It();function r(n,o){return n&&n.length?e(n,a(o,2),t):void 0}return Ue=r,Ue}var Lr=Dr();const $r=Lt(Lr);var Ye,kt;function Ir(){if(kt)return Ye;kt=1;var e=$t(),t=It(),a=mr();function r(n,o){return n&&n.length?e(n,t(o,2),a):void 0}return Ye=r,Ye}var Cr=Ir();const Mr=Lt(Cr);var Fr=["cx","cy","angle","ticks","axisLine"],Br=["ticks","tick","angle","tickFormatter","stroke"];function xe(e){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(e)}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ne.apply(this,arguments)}function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?wt(Object(a),!0).forEach(function(r){Be(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ot(e,t){if(e==null)return{};var a=Kr(e,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Kr(e,t){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gt(r.key),r)}}function zr(e,t,a){return t&&Nt(e.prototype,t),a&&Nt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vr(e,t,a){return t=Ie(t),Hr(e,qt()?Reflect.construct(t,a||[],Ie(e).constructor):t.apply(e,a))}function Hr(e,t){if(t&&(xe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qr(e)}function qr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!e})()}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ie(e)}function Gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Je(e,t)}function Be(e,t,a){return t=Gt(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Gt(e){var t=Ur(e,"string");return xe(t)=="symbol"?t:t+""}function Ur(e,t){if(xe(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(xe(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ke=function(e){function t(){return Wr(this,t),Vr(this,t,arguments)}return Gr(t,e),zr(t,[{key:"getTickValueCoord",value:function(r){var n=r.coordinate,o=this.props,s=o.angle,c=o.cx,u=o.cy;return X(c,u,n,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,n;switch(r){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var r=this.props,n=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=$r(c,function(f){return f.coordinate||0}),l=Mr(c,function(f){return f.coordinate||0});return{cx:n,cy:o,startAngle:s,endAngle:s,innerRadius:l.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=r.axisLine,l=Ot(r,Fr),f=c.reduce(function(g,h){return[Math.min(g[0],h.coordinate),Math.max(g[1],h.coordinate)]},[1/0,-1/0]),p=X(n,o,f[0],s),v=X(n,o,f[1],s),A=ue(ue(ue({},E(l,!1)),{},{fill:"none"},E(u,!1)),{},{x1:p.x,y1:p.y,x2:v.x,y2:v.y});return m.createElement("line",Ne({className:"recharts-polar-radius-axis-line"},A))}},{key:"renderTicks",value:function(){var r=this,n=this.props,o=n.ticks,s=n.tick,c=n.angle,u=n.tickFormatter,l=n.stroke,f=Ot(n,Br),p=this.getTickTextAnchor(),v=E(f,!1),A=E(s,!1),g=o.map(function(h,x){var b=r.getTickValueCoord(h),j=ue(ue(ue(ue({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},v),{},{stroke:"none",fill:l},A),{},{index:x},b),{},{payload:h});return m.createElement(L,Ne({className:U("recharts-polar-radius-axis-tick",Ct(s)),key:"tick-".concat(h.coordinate)},at(r.props,h,x)),t.renderTickItem(s,j,u?u(h.value,x):h.value))});return m.createElement(L,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,n=r.ticks,o=r.axisLine,s=r.tick;return!n||!n.length?null:m.createElement(L,{className:U("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Mt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,n,o){var s;return m.isValidElement(r)?s=m.cloneElement(r,n):q(r)?s=r(n):s=m.createElement(rt,Ne({},n,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}])}(P.PureComponent);Be(Ke,"displayName","PolarRadiusAxis");Be(Ke,"axisType","radiusAxis");Be(Ke,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(this,arguments)}function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pt(Object(a),!0).forEach(function(r){We(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function Xr(e,t,a){return t&&_t(e.prototype,t),a&&_t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zr(e,t,a){return t=Ce(t),Jr(e,Ut()?Reflect.construct(t,a||[],Ce(e).constructor):t.apply(e,a))}function Jr(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qr(e)}function Qr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ut=function(){return!!e})()}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ce(e)}function ea(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Qe(e,t)}function We(e,t,a){return t=Yt(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Yt(e){var t=ta(e,"string");return be(t)=="symbol"?t:t+""}function ta(e,t){if(be(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(be(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ra=Math.PI/180,aa=1e-5,ze=function(e){function t(){return Yr(this,t),Zr(this,t,arguments)}return ea(t,e),Xr(t,[{key:"getTickLineCoord",value:function(r){var n=this.props,o=n.cx,s=n.cy,c=n.radius,u=n.orientation,l=n.tickSize,f=l||8,p=X(o,s,c,r.coordinate),v=X(o,s,c+(u==="inner"?-1:1)*f,r.coordinate);return{x1:p.x,y1:p.y,x2:v.x,y2:v.y}}},{key:"getTickTextAnchor",value:function(r){var n=this.props.orientation,o=Math.cos(-r.coordinate*ra),s;return o>aa?s=n==="outer"?"start":"end":o<-1e-5?s=n==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.cx,o=r.cy,s=r.radius,c=r.axisLine,u=r.axisLineType,l=de(de({},E(this.props,!1)),{},{fill:"none"},E(c,!1));if(u==="circle")return m.createElement(Ft,fe({className:"recharts-polar-angle-axis-line"},l,{cx:n,cy:o,r:s}));var f=this.props.ticks,p=f.map(function(v){return X(n,o,s,v.coordinate)});return m.createElement(Rr,fe({className:"recharts-polar-angle-axis-line"},l,{points:p}))}},{key:"renderTicks",value:function(){var r=this,n=this.props,o=n.ticks,s=n.tick,c=n.tickLine,u=n.tickFormatter,l=n.stroke,f=E(this.props,!1),p=E(s,!1),v=de(de({},f),{},{fill:"none"},E(c,!1)),A=o.map(function(g,h){var x=r.getTickLineCoord(g),b=r.getTickTextAnchor(g),j=de(de(de({textAnchor:b},f),{},{stroke:"none",fill:l},p),{},{index:h,payload:g,x:x.x2,y:x.y2});return m.createElement(L,fe({className:U("recharts-polar-angle-axis-tick",Ct(s)),key:"tick-".concat(g.coordinate)},at(r.props,g,h)),c&&m.createElement("line",fe({className:"recharts-polar-angle-axis-tick-line"},v,x)),s&&t.renderTickItem(s,j,u?u(g.value,h):g.value))});return m.createElement(L,{className:"recharts-polar-angle-axis-ticks"},A)}},{key:"render",value:function(){var r=this.props,n=r.ticks,o=r.radius,s=r.axisLine;return o<=0||!n||!n.length?null:m.createElement(L,{className:U("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,n,o){var s;return m.isValidElement(r)?s=m.cloneElement(r,n):q(r)?s=r(n):s=m.createElement(rt,fe({},n,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}])}(P.PureComponent);We(ze,"displayName","PolarAngleAxis");We(ze,"axisType","angleAxis");We(ze,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var $e;function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ge.apply(this,arguments)}function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?St(Object(a),!0).forEach(function(r){z(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zt(r.key),r)}}function ia(e,t,a){return t&&Et(e.prototype,t),a&&Et(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function sa(e,t,a){return t=Me(t),oa(e,Xt()?Reflect.construct(t,a||[],Me(e).constructor):t.apply(e,a))}function oa(e,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return la(e)}function la(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xt=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Me(e)}function ca(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},et(e,t)}function z(e,t,a){return t=Zt(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Zt(e){var t=ua(e,"string");return je(t)=="symbol"?t:t+""}function ua(e,t){if(je(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(je(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Z=function(e){function t(a){var r;return na(this,t),r=sa(this,t,[a]),z(r,"pieRef",null),z(r,"sectorRefs",[]),z(r,"id",Wt("recharts-pie-")),z(r,"handleAnimationEnd",function(){var n=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),q(n)&&n()}),z(r,"handleAnimationStart",function(){var n=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),q(n)&&n()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return ca(t,e),ia(t,[{key:"isActiveIndex",value:function(r){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(r)!==-1:r===n}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,c=o.labelLine,u=o.dataKey,l=o.valueKey,f=E(this.props,!1),p=E(s,!1),v=E(c,!1),A=s&&s.offsetRadius||20,g=r.map(function(h,x){var b=(h.startAngle+h.endAngle)/2,j=X(h.cx,h.cy,h.outerRadius+A,b),N=_(_(_(_({},f),h),{},{stroke:"none"},p),{},{index:x,textAnchor:t.getTextAnchor(j.x,h.cx)},j),O=_(_(_(_({},f),h),{},{fill:"none",stroke:h.fill},v),{},{index:x,points:[X(h.cx,h.cy,h.outerRadius,b),j]}),k=u;return se(u)&&se(l)?k="value":se(u)&&(k=l),m.createElement(L,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(x)},c&&t.renderLabelLineItem(c,O,"line"),t.renderLabelItem(s,N,ie(h,k)))});return m.createElement(L,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var n=this,o=this.props,s=o.activeShape,c=o.blendStroke,u=o.inactiveShape;return r.map(function(l,f){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&r.length!==1)return null;var p=n.isActiveIndex(f),v=u&&n.hasActiveIndex()?u:null,A=p?s:v,g=_(_({},l),{},{stroke:c?l.fill:l.stroke,tabIndex:-1});return m.createElement(L,ge({ref:function(x){x&&!n.sectorRefs.includes(x)&&n.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},at(n.props,l,f),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(f)}),m.createElement(yr,ge({option:A,isActive:p,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,n=this.props,o=n.sectors,s=n.isAnimationActive,c=n.animationBegin,u=n.animationDuration,l=n.animationEasing,f=n.animationId,p=this.state,v=p.prevSectors,A=p.prevIsAnimationActive;return m.createElement(Bt,{begin:c,duration:u,isActive:s,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(A),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var h=g.t,x=[],b=o&&o[0],j=b.startAngle;return o.forEach(function(N,O){var k=v&&v[O],S=O>0?vr(N,"paddingAngle",0):0;if(k){var R=re(k.endAngle-k.startAngle,N.endAngle-N.startAngle),w=_(_({},N),{},{startAngle:j+S,endAngle:j+R(h)+S});x.push(w),j=w.endAngle}else{var $=N.endAngle,T=N.startAngle,I=re(0,$-T),K=I(h),D=_(_({},N),{},{startAngle:j+S,endAngle:j+K+S});x.push(D),j=D.endAngle}}),m.createElement(L,null,r.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(r){var n=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[s].focus(),n.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[c].focus(),n.setState({sectorToFocus:c});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,n=r.sectors,o=r.isAnimationActive,s=this.state.prevSectors;return o&&n&&n.length&&(!s||!Xe(s,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,n=this.props,o=n.hide,s=n.sectors,c=n.className,u=n.label,l=n.cx,f=n.cy,p=n.innerRadius,v=n.outerRadius,A=n.isAnimationActive,g=this.state.isAnimationFinished;if(o||!s||!s.length||!W(l)||!W(f)||!W(p)||!W(v))return null;var h=U("recharts-pie",c);return m.createElement(L,{tabIndex:this.props.rootTabIndex,className:h,ref:function(b){r.pieRef=b}},this.renderSectors(),u&&this.renderLabels(s),Mt.renderCallByParent(this.props,null,!1),(!A||g)&&Kt.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return n.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:r.sectors!==n.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,n){return r>n?"start":r<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,n,o){if(m.isValidElement(r))return m.cloneElement(r,n);if(q(r))return r(n);var s=U("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return m.createElement(De,ge({},n,{key:o,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,n,o){if(m.isValidElement(r))return m.cloneElement(r,n);var s=o;if(q(r)&&(s=r(n),m.isValidElement(s)))return s;var c=U("recharts-pie-label-text",typeof r!="boolean"&&!q(r)?r.className:"");return m.createElement(rt,ge({},n,{alignmentBaseline:"middle",className:c}),s)}}])}(P.PureComponent);$e=Z;z(Z,"displayName","Pie");z(Z,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!zt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});z(Z,"parseDeltaAngle",function(e,t){var a=Le(t-e),r=Math.min(Math.abs(t-e),360);return a*r});z(Z,"getRealPieData",function(e){var t=e.data,a=e.children,r=E(e,!1),n=gr(a,Vt);return t&&t.length?t.map(function(o,s){return _(_(_({payload:o},r),o),n&&n[s]&&n[s].props)}):n&&n.length?n.map(function(o){return _(_({},r),o.props)}):[]});z(Z,"parseCoordinateOfPie",function(e,t){var a=t.top,r=t.left,n=t.width,o=t.height,s=xr(n,o),c=r+Ee(e.cx,n,n/2),u=a+Ee(e.cy,o,o/2),l=Ee(e.innerRadius,s,0),f=Ee(e.outerRadius,s,s*.8),p=e.maxRadius||Math.sqrt(n*n+o*o)/2;return{cx:c,cy:u,innerRadius:l,outerRadius:f,maxRadius:p}});z(Z,"getComposedData",function(e){var t=e.item,a=e.offset,r=t.type.defaultProps!==void 0?_(_({},t.type.defaultProps),t.props):t.props,n=$e.getRealPieData(r);if(!n||!n.length)return null;var o=r.cornerRadius,s=r.startAngle,c=r.endAngle,u=r.paddingAngle,l=r.dataKey,f=r.nameKey,p=r.valueKey,v=r.tooltipType,A=Math.abs(r.minAngle),g=$e.parseCoordinateOfPie(r,a),h=$e.parseDeltaAngle(s,c),x=Math.abs(h),b=l;se(l)&&se(p)?(gt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):se(l)&&(gt(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=p);var j=n.filter(function(w){return ie(w,b,0)!==0}).length,N=(x>=360?j:j-1)*u,O=x-j*A-N,k=n.reduce(function(w,$){var T=ie($,b,0);return w+(W(T)?T:0)},0),S;if(k>0){var R;S=n.map(function(w,$){var T=ie(w,b,0),I=ie(w,f,$),K=(W(T)?T:0)/k,D;$?D=R.endAngle+Le(h)*u*(T!==0?1:0):D=s;var J=D+Le(h)*((T!==0?A:0)+K*O),oe=(D+J)/2,V=(g.innerRadius+g.outerRadius)/2,Pe=[{name:I,value:T,payload:w,dataKey:b,type:v}],ke=X(g.cx,g.cy,V,oe);return R=_(_(_({percent:K,cornerRadius:o,name:I,tooltipPayload:Pe,midAngle:oe,middleRadius:V,tooltipPosition:ke},w),g),{},{value:ie(w,b),startAngle:D,endAngle:J,payload:w,paddingAngle:Le(h)*u}),R})}return _(_({},g),{},{sectors:S,data:n})});var da=["layout","type","stroke","connectNulls","isRange","ref"],fa=["key"],Jt;function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(e)}function Qt(e,t){if(e==null)return{};var a=pa(e,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pa(e,t){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},pe.apply(this,arguments)}function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(a),!0).forEach(function(r){G(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tr(r.key),r)}}function ma(e,t,a){return t&&Rt(e.prototype,t),a&&Rt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function ya(e,t,a){return t=Fe(t),va(e,er()?Reflect.construct(t,a||[],Fe(e).constructor):t.apply(e,a))}function va(e,t){if(t&&(Ae(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ga(e)}function ga(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(er=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fe(e)}function xa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},tt(e,t)}function G(e,t,a){return t=tr(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tr(e){var t=ba(e,"string");return Ae(t)=="symbol"?t:t+""}function ba(e,t){if(Ae(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(Ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Y=function(e){function t(){var a;ha(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a=ya(this,t,[].concat(n)),G(a,"state",{isAnimationFinished:!0}),G(a,"id",Wt("recharts-area-")),G(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),q(s)&&s()}),G(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),q(s)&&s()}),a}return xa(t,e),ma(t,[{key:"renderDots",value:function(r,n,o){var s=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(s&&!c)return null;var u=this.props,l=u.dot,f=u.points,p=u.dataKey,v=E(this.props,!1),A=E(l,!0),g=f.map(function(x,b){var j=te(te(te({key:"dot-".concat(b),r:3},v),A),{},{index:b,cx:x.x,cy:x.y,dataKey:p,value:x.value,payload:x.payload,points:f});return t.renderDotItem(l,j)}),h={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(o,")"):null};return m.createElement(L,pe({className:"recharts-area-dots"},h),g)}},{key:"renderHorizontalRect",value:function(r){var n=this.props,o=n.baseLine,s=n.points,c=n.strokeWidth,u=s[0].x,l=s[s.length-1].x,f=r*Math.abs(u-l),p=Te(s.map(function(v){return v.y||0}));return W(o)&&typeof o=="number"?p=Math.max(o,p):o&&Array.isArray(o)&&o.length&&(p=Math.max(Te(o.map(function(v){return v.y||0})),p)),W(p)?m.createElement("rect",{x:u<l?u:u-f,y:0,width:f,height:Math.floor(p+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var n=this.props,o=n.baseLine,s=n.points,c=n.strokeWidth,u=s[0].y,l=s[s.length-1].y,f=r*Math.abs(u-l),p=Te(s.map(function(v){return v.x||0}));return W(o)&&typeof o=="number"?p=Math.max(o,p):o&&Array.isArray(o)&&o.length&&(p=Math.max(Te(o.map(function(v){return v.x||0})),p)),W(p)?m.createElement("rect",{x:0,y:u<l?u:u-f,width:p+(c?parseInt("".concat(c),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,n,o,s){var c=this.props,u=c.layout,l=c.type,f=c.stroke,p=c.connectNulls,v=c.isRange;c.ref;var A=Qt(c,da);return m.createElement(L,{clipPath:o?"url(#clipPath-".concat(s,")"):null},m.createElement(De,pe({},E(A,!0),{points:r,connectNulls:p,type:l,baseLine:n,layout:u,stroke:"none",className:"recharts-area-area"})),f!=="none"&&m.createElement(De,pe({},E(this.props,!1),{className:"recharts-area-curve",layout:u,type:l,connectNulls:p,fill:"none",points:r})),f!=="none"&&v&&m.createElement(De,pe({},E(this.props,!1),{className:"recharts-area-curve",layout:u,type:l,connectNulls:p,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(r,n){var o=this,s=this.props,c=s.points,u=s.baseLine,l=s.isAnimationActive,f=s.animationBegin,p=s.animationDuration,v=s.animationEasing,A=s.animationId,g=this.state,h=g.prevPoints,x=g.prevBaseLine;return m.createElement(Bt,{begin:f,duration:p,isActive:l,easing:v,from:{t:0},to:{t:1},key:"area-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var j=b.t;if(h){var N=h.length/c.length,O=c.map(function(w,$){var T=Math.floor($*N);if(h[T]){var I=h[T],K=re(I.x,w.x),D=re(I.y,w.y);return te(te({},w),{},{x:K(j),y:D(j)})}return w}),k;if(W(u)&&typeof u=="number"){var S=re(x,u);k=S(j)}else if(se(u)||br(u)){var R=re(x,0);k=R(j)}else k=u.map(function(w,$){var T=Math.floor($*N);if(x[T]){var I=x[T],K=re(I.x,w.x),D=re(I.y,w.y);return te(te({},w),{},{x:K(j),y:D(j)})}return w});return o.renderAreaStatically(O,k,r,n)}return m.createElement(L,null,m.createElement("defs",null,m.createElement("clipPath",{id:"animationClipPath-".concat(n)},o.renderClipRect(j))),m.createElement(L,{clipPath:"url(#animationClipPath-".concat(n,")")},o.renderAreaStatically(c,u,r,n)))})}},{key:"renderArea",value:function(r,n){var o=this.props,s=o.points,c=o.baseLine,u=o.isAnimationActive,l=this.state,f=l.prevPoints,p=l.prevBaseLine,v=l.totalLength;return u&&s&&s.length&&(!f&&v>0||!Xe(f,s)||!Xe(p,c))?this.renderAreaWithAnimation(r,n):this.renderAreaStatically(s,c,r,n)}},{key:"render",value:function(){var r,n=this.props,o=n.hide,s=n.dot,c=n.points,u=n.className,l=n.top,f=n.left,p=n.xAxis,v=n.yAxis,A=n.width,g=n.height,h=n.isAnimationActive,x=n.id;if(o||!c||!c.length)return null;var b=this.state.isAnimationFinished,j=c.length===1,N=U("recharts-area",u),O=p&&p.allowDataOverflow,k=v&&v.allowDataOverflow,S=O||k,R=se(x)?this.id:x,w=(r=E(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},$=w.r,T=$===void 0?3:$,I=w.strokeWidth,K=I===void 0?2:I,D=jr(s)?s:{},J=D.clipDot,oe=J===void 0?!0:J,V=T*2+K;return m.createElement(L,{className:N},O||k?m.createElement("defs",null,m.createElement("clipPath",{id:"clipPath-".concat(R)},m.createElement("rect",{x:O?f:f-A/2,y:k?l:l-g/2,width:O?A:A*2,height:k?g:g*2})),!oe&&m.createElement("clipPath",{id:"clipPath-dots-".concat(R)},m.createElement("rect",{x:f-V/2,y:l-V/2,width:A+V,height:g+V}))):null,j?null:this.renderArea(S,R),(s||j)&&this.renderDots(S,oe,R),(!h||b)&&Kt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:r.points!==n.curPoints||r.baseLine!==n.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(P.PureComponent);Jt=Y;G(Y,"displayName","Area");G(Y,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!zt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});G(Y,"getBaseValue",function(e,t,a,r){var n=e.layout,o=e.baseValue,s=t.props.baseValue,c=s??o;if(W(c)&&typeof c=="number")return c;var u=n==="horizontal"?r:a,l=u.scale.domain();if(u.type==="number"){var f=Math.max(l[0],l[1]),p=Math.min(l[0],l[1]);return c==="dataMin"?p:c==="dataMax"||f<0?f:Math.max(Math.min(l[0],l[1]),0)}return c==="dataMin"?l[0]:c==="dataMax"?l[1]:l[0]});G(Y,"getComposedData",function(e){var t=e.props,a=e.item,r=e.xAxis,n=e.yAxis,o=e.xAxisTicks,s=e.yAxisTicks,c=e.bandSize,u=e.dataKey,l=e.stackedData,f=e.dataStartIndex,p=e.displayedData,v=e.offset,A=t.layout,g=l&&l.length,h=Jt.getBaseValue(t,a,r,n),x=A==="horizontal",b=!1,j=p.map(function(O,k){var S;g?S=l[f+k]:(S=ie(O,u),Array.isArray(S)?b=!0:S=[h,S]);var R=S[1]==null||g&&ie(O,u)==null;return x?{x:xt({axis:r,ticks:o,bandSize:c,entry:O,index:k}),y:R?null:n.scale(S[1]),value:S,payload:O}:{x:R?null:r.scale(S[1]),y:xt({axis:n,ticks:s,bandSize:c,entry:O,index:k}),value:S,payload:O}}),N;return g||b?N=j.map(function(O){var k=Array.isArray(O.value)?O.value[0]:null;return x?{x:O.x,y:k!=null&&O.y!=null?n.scale(k):null}:{x:k!=null?r.scale(k):null,y:O.y}}):N=x?n.scale(h):r.scale(h),te({points:j,baseLine:N,layout:A,isRange:b},v)});G(Y,"renderDotItem",function(e,t){var a;if(m.isValidElement(e))a=m.cloneElement(e,t);else if(q(e))a=e(t);else{var r=U("recharts-area-dot",typeof e!="boolean"?e.className:""),n=t.key,o=Qt(t,fa);a=m.createElement(Ft,pe({},o,{key:n,className:r}))}return a});var Re=nt({chartName:"BarChart",GraphicalChild:ye,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ae},{axisType:"yAxis",AxisComp:ne}],formatAxisMap:Ht}),ja=nt({chartName:"PieChart",GraphicalChild:Z,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ze},{axisType:"radiusAxis",AxisComp:Ke}],formatAxisMap:Ar,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Dt=nt({chartName:"AreaChart",GraphicalChild:Y,axisComponents:[{axisType:"xAxis",AxisComp:ae},{axisType:"yAxis",AxisComp:ne}],formatAxisMap:Ht});const Aa=()=>{var pt,ht,mt,yt,vt;const[e,t]=P.useState(null),[a,r]=P.useState(null),[n,o]=P.useState(null),[s,c]=P.useState(null),[u,l]=P.useState(null),[f,p]=P.useState(null),[v,A]=P.useState(!0),[g,h]=P.useState(!1),[x,b]=P.useState(null),[j,N]=P.useState(null),[O,k]=P.useState(!1),[S,R]=P.useState(!1),[w,$]=P.useState(null),[T,I]=P.useState("12"),[K,D]=P.useState("0"),[J,oe]=P.useState("230"),[V,Pe]=P.useState("2016-09-26"),[ke,it]=P.useState("2016-10-16"),[Ve,st]=P.useState(""),[He,ot]=P.useState("0"),[qe,lt]=P.useState("23");P.useEffect(()=>{ct();const d=setInterval(ct,3e5);return()=>clearInterval(d)},[]);const ct=async()=>{try{A(!0);const[d,y,H]=await Promise.all([fetch("/api/statistics"),fetch("/api/analysis"),fetch("/api/data")]);if(!d.ok||!y.ok||!H.ok)throw new Error("Backend not available");const[he,_e,Se]=await Promise.all([d.json(),y.json(),H.json()]);t(he),r(_e),o(Se),N(null)}catch(d){N(d instanceof Error?d.message:"Failed to load data")}finally{A(!1)}},ut=async()=>{try{h(!0),b(null),N(null);const d=new URLSearchParams;V&&d.append("start_date",V),ke&&d.append("end_date",ke),Ve&&d.append("detid",Ve),He&&d.append("hour_start",He),qe&&d.append("hour_end",qe);const y=d.toString(),[H,he,_e]=await Promise.all([fetch(`/api/statistics?${y}`),fetch(`/api/analysis?${y}`),fetch(`/api/data?${y}`)]);if(H.ok&&he.ok&&_e.ok){const[Se,cr,ur]=await Promise.all([H.json(),he.json(),_e.json()]);t(Se),r(cr),o(ur);const dr=Se.row_count||0;b(`Found ${dr.toLocaleString()} records`),N(null)}}catch(d){console.error("Filter error:",d),N("Failed to apply filters"),b(null)}finally{h(!1)}},rr=async()=>{try{k(!0);const d=await fetch("/api/train",{method:"POST"});if(!d.ok)throw new Error("Training failed");const y=await d.json();p(y.metrics),c(y.feature_importance);const H=await fetch("/api/correlation");if(H.ok){const he=await H.json();l(he.correlations)}}catch(d){console.error("Training error:",d)}finally{k(!1)}},ar=async()=>{try{R(!0);const d=await fetch("/api/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hour:parseInt(T),weekday:parseInt(K),detid:parseInt(J)})});if(!d.ok)throw new Error("Prediction failed");const y=await d.json();$(y)}catch(d){console.error("Prediction error:",d)}finally{R(!1)}};if(v)return i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Loading ML Dashboard..."})]})});if(j||!e||!a)return i.jsxs(C,{className:"border-orange-500/50 bg-gray-900",children:[i.jsx(M,{children:i.jsxs(F,{className:"flex items-center text-orange-400",children:[i.jsx(fr,{className:"h-5 w-5 mr-2"}),"Backend Not Running"]})}),i.jsx(B,{children:i.jsxs("p",{className:"text-gray-300 mb-4",children:["Run: ",i.jsx("code",{className:"bg-black px-2 py-1 rounded text-green-400",children:"npm run dev:all"})]})})]});const nr=s?Object.entries(s).map(([d,y])=>({name:d,value:Math.round(y*1e3)/1e3})).sort((d,y)=>y.value-d.value).slice(0,8):[],ir=n!=null&&n.hourly_flow?Object.entries(n.hourly_flow).map(([d,y])=>({hour:`${d}:00`,flow:Math.round(y||0)})):[],dt=n!=null&&n.traffic_distribution?Object.entries(n.traffic_distribution).map(([d,y])=>({name:d,value:y||0})):[],ft=["#10b981","#fbbf24","#ef4444"],sr=Object.entries(a.hourly_congestion).map(([d,y])=>({hour:`${d}:00`,index:Math.round(y*100)/100})),or=Object.entries(a.daily_congestion).map(([d,y])=>({day:d,index:Math.round(y*100)/100})),lr=Array.from({length:24},(d,y)=>({hour:`${String(y).padStart(2,"0")}:00`,weekday:Math.round(a.weekday_hourly_flow[y]||0),weekend:Math.round(a.weekend_hourly_flow[y]||0)}));return i.jsxs("div",{className:"space-y-8 bg-gray-950 min-h-screen p-4 md:p-8",children:[i.jsx("div",{className:"mb-4",children:i.jsxs(we,{onClick:()=>window.location.href="/torino-dashboard",variant:"outline",className:"border-gray-700 hover:bg-gray-800 text-gray-300 hover:text-white",children:[i.jsx(pr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),i.jsxs("div",{className:"text-center mb-10",children:[i.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent mb-3",children:"Torino Traffic ML Analysis"}),i.jsx("p",{className:"text-gray-400 text-lg",children:"Random Forest Prediction System • Torino Dataset • 2026"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-lg",children:"Data Statistics"})}),i.jsxs(B,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Total Records:"}),i.jsx("span",{className:"text-white font-mono",children:((e==null?void 0:e.row_count)||0).toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Date Range:"}),i.jsxs("span",{className:"text-white text-sm",children:[((pt=e==null?void 0:e.date_range)==null?void 0:pt.start)||"N/A"," to ",((ht=e==null?void 0:e.date_range)==null?void 0:ht.end)||"N/A"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Detectors:"}),i.jsx("span",{className:"text-white font-mono",children:(e==null?void 0:e.detector_count)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Avg Flow:"}),i.jsx("span",{className:"text-white font-mono",children:Math.round(((mt=e==null?void 0:e.flow_stats)==null?void 0:mt.mean)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Avg Speed:"}),i.jsxs("span",{className:"text-white font-mono",children:[Math.round(((yt=e==null?void 0:e.speed_stats)==null?void 0:yt.mean)||0)," km/h"]})]})]})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-lg",children:"Model Training"})}),i.jsxs(B,{className:"pt-6 space-y-4",children:[i.jsx(we,{onClick:rr,disabled:O,className:"w-full bg-green-600 hover:bg-green-700",children:O?"Training...":"⚡ Train Model"}),f&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-center text-sm text-green-400",children:"Model trained successfully!"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f.r2_score.toFixed(4)}),i.jsx("div",{className:"text-xs text-gray-400",children:"R² SCORE"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f.mae.toFixed(2)}),i.jsx("div",{className:"text-xs text-gray-400",children:"MAE"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f.rmse.toFixed(2)}),i.jsx("div",{className:"text-xs text-gray-400",children:"RMSE"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:f.train_size.toLocaleString()}),i.jsx("div",{className:"text-xs text-gray-400",children:"TRAIN SIZE"})]})]}),i.jsxs("div",{className:"text-center text-xs text-gray-500",children:["(sampled from ",((e==null?void 0:e.row_count)||0).toLocaleString(),")"]})]})]})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-lg",children:"Prediction"})}),i.jsxs(B,{className:"pt-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"HOUR (0-23)"}),i.jsx(Q,{type:"number",value:T,onChange:d=>I(d.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"WEEKDAY (0=MON)"}),i.jsx(Q,{type:"number",value:K,onChange:d=>D(d.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"DETECTOR ID"}),i.jsx(Q,{type:"number",value:J,onChange:d=>oe(d.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsx(we,{onClick:ar,disabled:S,className:"w-full bg-purple-600 hover:bg-purple-700",children:"Predict Flow"}),w&&i.jsx("div",{className:"bg-gray-800 p-3 rounded",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Math.round(w.prediction)}),i.jsx("div",{className:"text-xs text-gray-400",children:"Predicted Flow"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Index: ",(vt=w.traffic_index)==null?void 0:vt.toFixed(2)," • ",w.category]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Feature Importance"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:250,children:i.jsxs(Re,{data:nr,layout:"vertical",children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{type:"number",stroke:"#9ca3af",fontSize:10}),i.jsx(ne,{dataKey:"name",type:"category",stroke:"#9ca3af",fontSize:10,width:120}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(ye,{dataKey:"value",fill:"#3b82f6"})]})})})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Hourly Traffic Flow"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:250,children:i.jsxs(Dt,{data:ir,children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{dataKey:"hour",stroke:"#9ca3af",fontSize:9,angle:-45,textAnchor:"end",height:60}),i.jsx(ne,{stroke:"#9ca3af",fontSize:10}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(Y,{type:"monotone",dataKey:"flow",stroke:"#06b6d4",fill:"#06b6d4",fillOpacity:.6})]})})})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800 hover:border-green-500/50 transition-all",children:[i.jsx(M,{className:"border-b border-gray-800 pb-4",children:i.jsx(F,{className:"text-green-400 text-base font-semibold",children:"Traffic Distribution"})}),i.jsx(B,{className:"pt-6 flex items-center justify-center",children:i.jsx(le,{width:"100%",height:300,children:i.jsxs(ja,{children:[i.jsx(Z,{data:dt,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,fill:"#8884d8",dataKey:"value",label:({name:d,percent:y})=>`${d} (${(y*100).toFixed(0)}%)`,labelLine:!0,children:dt.map((d,y)=>i.jsx(Vt,{fill:ft[y%ft.length]},`cell-${y}`))}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"},formatter:(d,y)=>[d.toLocaleString(),y]}),i.jsx(Ge,{})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Weekday vs Weekend Comparison"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:250,children:i.jsxs(Re,{data:[{metric:"Avg Flow",Weekday:Math.round(a.weekday_vs_weekend.weekday.avg_flow),Weekend:Math.round(a.weekday_vs_weekend.weekend.avg_flow)},{metric:"Avg Speed",Weekday:Math.round(a.weekday_vs_weekend.weekday.avg_speed),Weekend:Math.round(a.weekday_vs_weekend.weekend.avg_speed)},{metric:"Avg Occupancy",Weekday:Math.round(a.weekday_vs_weekend.weekday.avg_occ*10)/10,Weekend:Math.round(a.weekday_vs_weekend.weekend.avg_occ*10)/10},{metric:"Traffic Index",Weekday:Math.round(a.weekday_vs_weekend.weekday.avg_traffic_index*10)/10,Weekend:Math.round(a.weekday_vs_weekend.weekend.avg_traffic_index*10)/10}],children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{dataKey:"metric",stroke:"#9ca3af",fontSize:10}),i.jsx(ne,{stroke:"#9ca3af",fontSize:10}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(Ge,{}),i.jsx(ye,{dataKey:"Weekday",fill:"#8b5cf6"}),i.jsx(ye,{dataKey:"Weekend",fill:"#ec4899"})]})})})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Congestion by Hour"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:250,children:i.jsxs(Re,{data:sr,children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{dataKey:"hour",stroke:"#9ca3af",fontSize:9,angle:-45,textAnchor:"end",height:60}),i.jsx(ne,{stroke:"#9ca3af",fontSize:10}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(ye,{dataKey:"index",fill:"#f59e0b"})]})})})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Congestion by Day"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:250,children:i.jsxs(Re,{data:or,children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{dataKey:"day",stroke:"#9ca3af",fontSize:10}),i.jsx(ne,{stroke:"#9ca3af",fontSize:10}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(ye,{dataKey:"index",fill:"#f59e0b"})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Peak Congestion Hours"})}),i.jsx(B,{className:"pt-4",children:i.jsx("div",{className:"space-y-3",children:a.peak_hours.map((d,y)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-800 p-3 rounded",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-2xl",children:y===0?"🥇":y===1?"🥈":y===2?"🥉":y===3?"🔵":"🔴"}),i.jsx("div",{children:i.jsxs("div",{className:"text-white font-bold",children:[d.hour,":00"]})})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"text-yellow-400 font-bold",children:["Index: ",d.index]})})]},y))})})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Weekday vs Weekend Flow Pattern"})}),i.jsx(B,{className:"pt-4",children:i.jsx(le,{width:"100%",height:280,children:i.jsxs(Dt,{data:lr,children:[i.jsx(me,{strokeDasharray:"3 3",stroke:"#374151"}),i.jsx(ae,{dataKey:"hour",stroke:"#9ca3af",fontSize:9,angle:-45,textAnchor:"end",height:60}),i.jsx(ne,{stroke:"#9ca3af",fontSize:10}),i.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"none"}}),i.jsx(Ge,{}),i.jsx(Y,{type:"monotone",dataKey:"weekday",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),i.jsx(Y,{type:"monotone",dataKey:"weekend",stroke:"#ec4899",fill:"#ec4899",fillOpacity:.6})]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Data Filters"})}),i.jsxs(B,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"START DATE"}),i.jsx(Q,{type:"date",value:V,onChange:d=>Pe(d.target.value),className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"END DATE"}),i.jsx(Q,{type:"date",value:ke,onChange:d=>it(d.target.value),className:"bg-gray-800 border-gray-700 text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"DETECTOR ID"}),i.jsx(Q,{type:"number",value:Ve,onChange:d=>st(d.target.value),placeholder:"e.g., 230",className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"HOUR START"}),i.jsx(Q,{type:"number",min:"0",max:"23",value:He,onChange:d=>ot(d.target.value),placeholder:"0-23",className:"bg-gray-800 border-gray-700 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(ee,{className:"text-gray-400 text-xs",children:"HOUR END"}),i.jsx(Q,{type:"number",min:"0",max:"23",value:qe,onChange:d=>lt(d.target.value),placeholder:"0-23",className:"bg-gray-800 border-gray-700 text-white"})]}),i.jsx(we,{onClick:ut,disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700",children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Applying..."]}):"Apply Filters"}),i.jsx(we,{onClick:()=>{Pe("2016-09-26"),it("2016-10-16"),st(""),ot("0"),lt("23"),b(null),N(null),setTimeout(()=>ut(),100)},variant:"outline",className:"w-full",children:"Reset Filters"}),x&&i.jsxs("div",{className:"bg-green-500/10 border border-green-500/50 rounded p-3 text-green-400 text-sm font-semibold flex items-center gap-2 mt-4",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),x]})]})]}),i.jsxs(C,{className:"bg-gray-900 border-gray-800",children:[i.jsx(M,{className:"border-b border-gray-800",children:i.jsx(F,{className:"text-blue-400 text-sm",children:"Feature Correlations"})}),i.jsx(B,{className:"pt-6",children:u?i.jsx("div",{className:"space-y-2",children:Object.entries(u).sort((d,y)=>Math.abs(y[1])-Math.abs(d[1])).slice(0,10).map(([d,y],H)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-800 p-3 rounded",children:[i.jsx("span",{className:"text-gray-300 text-sm",children:d}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full ${y>0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.abs(y)*100}%`}})}),i.jsx("span",{className:`text-sm font-mono font-bold ${y>0?"text-green-400":"text-red-400"}`,children:y.toFixed(4)})]})]},H))}):i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("p",{className:"mb-4",children:"Train the model to see feature correlations"}),i.jsx("p",{className:"text-sm",children:'Click "Train Model" button above'})]})})]})]})]})},_a=()=>i.jsx(Aa,{});export{_a as default};
