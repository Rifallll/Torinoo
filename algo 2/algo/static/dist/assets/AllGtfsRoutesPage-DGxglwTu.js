import{r as t,j as e,B as u,L as P,C as g,t as h}from"./index-DF6BEUun.js";import{B as D}from"./badge-Bpc-iUD6.js";import{b as O,R as H,S as V,c as z,d as X,e as q,f as _}from"./select-_cz-SKrB.js";import{T as J,d as K,b as v,e as c,a as Q,c as n}from"./table-BYPVbGZv.js";import{I as U}from"./input-CJSYcS0U.js";import{A as W}from"./arrow-left-8Q1IB9i5.js";import{S as Y}from"./search-B076Z6qi.js";import{C as R}from"./circle-x-BvIIqU8N.js";import{P as Z}from"./plus-BVuh2W-r.js";import{I as $}from"./info-C-aJ_sCJ.js";import{C as L,a as ee,S as ae,B as re,b as A,T as se}from"./tram-front-yMcRfdku.js";import"./useQuery-B9rE_mUz.js";import"./index-BgET2F0P.js";import"./index-B97dF7U3.js";import"./tslib.es6-CmEaCU22.js";const te=20,Ne=()=>{const{data:l,isLoading:F,error:b}=O(),x=(l==null?void 0:l.routes)||[],y=(l==null?void 0:l.agencies)||[],[o,p]=t.useState(""),[d,j]=t.useState("all"),[N,f]=t.useState(1),w=a=>{switch(a){case 0:return"Tram";case 1:return"Subway";case 2:return"Rail";case 3:return"Bus";case 4:return"Ferry";case 5:return"Cable Car";case 6:return"Gondola";case 7:return"Funicular";default:return"Other"}},I=a=>{switch(a){case 0:return e.jsx(se,{className:"h-4 w-4 mr-1"});case 1:return e.jsx(A,{className:"h-4 w-4 mr-1"});case 2:return e.jsx(A,{className:"h-4 w-4 mr-1"});case 3:return e.jsx(re,{className:"h-4 w-4 mr-1"});case 4:return e.jsx(ae,{className:"h-4 w-4 mr-1"});case 5:return e.jsx(L,{className:"h-4 w-4 mr-1"});case 6:return e.jsx(ee,{className:"h-4 w-4 mr-1"});case 7:return e.jsx(L,{className:"h-4 w-4 mr-1"});default:return e.jsx($,{className:"h-4 w-4 mr-1"})}},i=t.useMemo(()=>{let a=x;if(o){const r=o.toLowerCase();a=a.filter(s=>{var k,C,T,S;return s.route_id.toLowerCase().includes(r)||((k=s.route_short_name)==null?void 0:k.toLowerCase().includes(r))||((C=s.route_long_name)==null?void 0:C.toLowerCase().includes(r))||((T=s.route_desc)==null?void 0:T.toLowerCase().includes(r))||((S=y.find(E=>E.agency_id===s.agency_id))==null?void 0:S.agency_name.toLowerCase().includes(r))})}if(d!=="all"){const r=parseInt(d,10);a=a.filter(s=>s.route_type===r)}return a},[x,o,d,y]),m=t.useMemo(()=>i.slice(0,N*te),[i,N]),B=t.useCallback(()=>{f(a=>a+1)},[]),G=()=>{p(""),j("all"),f(1)},M=t.useMemo(()=>{const a=new Set;return x.forEach(r=>a.add(r.route_type)),Array.from(a).sort((r,s)=>r-s)},[x]);return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8",children:[e.jsxs("header",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[e.jsx(H,{className:"h-8 w-8 md:h-10 md:w-10 mr-3 text-indigo-600"}),"All Public Transport Routes (GTFS)"]}),e.jsx(u,{asChild:!0,variant:"outline",className:"px-4 py-2 text-sm md:text-base",children:e.jsxs(P,{to:"/torino-dashboard",className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})]}),e.jsxs("main",{className:"flex-1 max-w-7xl mx-auto w-full",children:[e.jsx(g,{className:"mb-6 p-4 bg-white dark:bg-gray-800 shadow-lg rounded-xl",children:e.jsx(h,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(U,{type:"text",placeholder:"Search routes (ID, name, description, operator)...",className:"pl-9 pr-8 w-full h-10 text-base border-gray-300 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:a=>p(a.target.value)}),o&&e.jsx(u,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 text-gray-500 hover:bg-transparent",onClick:()=>p(""),children:e.jsx(R,{className:"h-4 w-4"})})]}),e.jsxs(V,{onValueChange:j,value:d,children:[e.jsx(z,{className:"w-full sm:w-[200px] h-10 text-base border-gray-300 dark:border-gray-600 focus:ring-indigo-500 focus:border-indigo-500",children:e.jsx(X,{placeholder:"Filter Route Type"})}),e.jsxs(q,{className:"dark:bg-gray-700 dark:text-gray-200",children:[e.jsx(_,{value:"all",children:"All Types"}),M.map(a=>e.jsx(_,{value:String(a),children:w(a)},a))]})]}),(o||d!=="all")&&e.jsxs(u,{variant:"outline",onClick:G,className:"flex items-center h-10 px-4 py-2 text-base",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Reset Filters"]})]})})}),F?e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center py-12 text-lg",children:"Loading local GTFS route data..."}):b?e.jsx(g,{className:"dark:bg-gray-800 dark:text-gray-200 shadow-lg rounded-xl border-red-500",children:e.jsxs(h,{className:"p-6 text-center text-red-500 text-lg",children:["Failed to load routes: ",b.message]})}):m.length>0?e.jsxs(g,{className:"dark:bg-gray-800 dark:text-gray-200 shadow-xl rounded-xl",children:[e.jsx(h,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(J,{children:[e.jsx(K,{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs(v,{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsx(c,{className:"w-[120px] py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Route ID"}),e.jsx(c,{className:"py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Short Name"}),e.jsx(c,{className:"py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Long Name"}),e.jsx(c,{className:"py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Type"}),e.jsx(c,{className:"py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Operator"}),e.jsx(c,{className:"py-4 px-6 text-gray-700 dark:text-gray-300 font-semibold text-sm",children:"Description"})]})}),e.jsx(Q,{children:m.map(a=>{const r=y.find(s=>s.agency_id===a.agency_id);return e.jsxs(v,{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(n,{className:"font-medium py-3 px-6 text-gray-800 dark:text-gray-100",children:a.route_id}),e.jsx(n,{className:"py-3 px-6 text-gray-700 dark:text-gray-200",children:a.route_short_name||"N/A"}),e.jsx(n,{className:"py-3 px-6 text-gray-700 dark:text-gray-200",children:a.route_long_name||"N/A"}),e.jsx(n,{className:"py-3 px-6",children:e.jsxs(D,{variant:"outline",className:"text-xs flex items-center bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:[I(a.route_type)," ",w(a.route_type)]})}),e.jsx(n,{className:"py-3 px-6 text-gray-700 dark:text-gray-200",children:(r==null?void 0:r.agency_name)||"N/A"}),e.jsx(n,{className:"max-w-[250px] truncate py-3 px-6 text-gray-700 dark:text-gray-200",children:a.route_desc||"N/A"})]},a.route_id)})})]})})}),m.length<i.length&&e.jsx("div",{className:"text-center mt-4 p-4 border-t dark:border-gray-700",children:e.jsxs(u,{onClick:B,variant:"outline",className:"flex items-center mx-auto",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"})," Load More (",i.length-m.length," remaining)"]})})]}):e.jsx(g,{className:"dark:bg-gray-800 dark:text-gray-200 shadow-lg rounded-xl",children:e.jsx(h,{className:"p-6 text-center text-gray-600 dark:text-gray-400 text-lg",children:"No public transport routes available from local GTFS data matching your filters."})})]})]})};export{Ne as default};
