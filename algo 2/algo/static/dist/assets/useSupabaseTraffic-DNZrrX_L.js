import{r as t}from"./index-DF6BEUun.js";import{s as o}from"./supabaseClient-C32MglI1.js";const S=()=>{const[f,i]=t.useState([]),[l,r]=t.useState([]),[u,s]=t.useState(!0),[d,n]=t.useState(null),a=async()=>{try{s(!0);const{data:e,error:c}=await o.from("incidents").select("*").order("reported_at",{ascending:!1});if(c)throw c;const{data:g,error:h}=await o.from("traffic_changes").select("*").order("start_date",{ascending:!1});h?(console.warn("traffic_changes table not found, skipping."),r([])):r(g||[]),i(e||[]),n(null)}catch(e){console.error("Error fetching Supabase traffic data:",e),n(e.message)}finally{s(!1)}};return t.useEffect(()=>{a();const e=setInterval(()=>{console.log("Auto-refreshing Supabase traffic data..."),a()},60*1e3);return()=>clearInterval(e)},[]),{incidents:f,trafficChanges:l,isLoading:u,error:d,refetch:a}};export{S as u};
